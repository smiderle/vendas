<!-- widget grid -->
<section id="widget-grid" class="">

	<!-- row -->
	<div class="row">

		<article class="col-sm-12 col-md-12 col-lg-12 sortable-grid ui-sortable">
			
			<div  ng-init="initUserForm()" class="jarviswidget jarviswidget-color-greenDark jarviswidget-sortable" id="wid-id-1" 
				data-widget-collapsed="false"
				data-widget-custombutton="false"
				data-widget-deletebutton="false" 
				role="widget" 
				style="position: relative; opacity: 1;">
				<header role="heading"><div class="jarviswidget-ctrls" role="menu">   <a href="#" class="button-icon jarviswidget-toggle-btn " rel="tooltip" title="" data-placement="bottom" data-original-title="Collapse" style="display: block;"><i class="fa fa-minus "></i></a> <a href="javascript:void(0);" class="button-icon jarviswidget-fullscreen-btn" rel="tooltip" title="" data-placement="bottom" data-original-title="Fullscreen"><i class="fa fa-expand"></i></a> <a href="javascript:void(0);" class="button-icon jarviswidget-delete-btn" rel="tooltip" title="" data-placement="bottom" data-original-title="Delete" style="display: block;"><i class="fa fa-times"></i></a></div><div class="widget-toolbar" role="menu"><a data-toggle="dropdown" class="dropdown-toggle color-box selector" href="javascript:void(0);"></a><ul class="dropdown-menu arrow-box-up-right color-select pull-right"><li><span class="bg-color-green" data-widget-setstyle="jarviswidget-color-green" rel="tooltip" data-placement="left" data-original-title="Green Grass"></span></li><li><span class="bg-color-greenDark" data-widget-setstyle="jarviswidget-color-greenDark" rel="tooltip" data-placement="top" data-original-title="Dark Green"></span></li><li><span class="bg-color-greenLight" data-widget-setstyle="jarviswidget-color-greenLight" rel="tooltip" data-placement="top" data-original-title="Light Green"></span></li><li><span class="bg-color-purple" data-widget-setstyle="jarviswidget-color-purple" rel="tooltip" data-placement="top" data-original-title="Purple"></span></li><li><span class="bg-color-magenta" data-widget-setstyle="jarviswidget-color-magenta" rel="tooltip" data-placement="top" data-original-title="Magenta"></span></li><li><span class="bg-color-pink" data-widget-setstyle="jarviswidget-color-pink" rel="tooltip" data-placement="right" data-original-title="Pink"></span></li><li><span class="bg-color-pinkDark" data-widget-setstyle="jarviswidget-color-pinkDark" rel="tooltip" data-placement="left" data-original-title="Fade Pink"></span></li><li><span class="bg-color-blueLight" data-widget-setstyle="jarviswidget-color-blueLight" rel="tooltip" data-placement="top" data-original-title="Light Blue"></span></li><li><span class="bg-color-teal" data-widget-setstyle="jarviswidget-color-teal" rel="tooltip" data-placement="top" data-original-title="Teal"></span></li><li><span class="bg-color-blue" data-widget-setstyle="jarviswidget-color-blue" rel="tooltip" data-placement="top" data-original-title="Ocean Blue"></span></li><li><span class="bg-color-blueDark" data-widget-setstyle="jarviswidget-color-blueDark" rel="tooltip" data-placement="top" data-original-title="Night Sky"></span></li><li><span class="bg-color-darken" data-widget-setstyle="jarviswidget-color-darken" rel="tooltip" data-placement="right" data-original-title="Night"></span></li><li><span class="bg-color-yellow" data-widget-setstyle="jarviswidget-color-yellow" rel="tooltip" data-placement="left" data-original-title="Day Light"></span></li><li><span class="bg-color-orange" data-widget-setstyle="jarviswidget-color-orange" rel="tooltip" data-placement="bottom" data-original-title="Orange"></span></li><li><span class="bg-color-orangeDark" data-widget-setstyle="jarviswidget-color-orangeDark" rel="tooltip" data-placement="bottom" data-original-title="Dark Orange"></span></li><li><span class="bg-color-red" data-widget-setstyle="jarviswidget-color-red" rel="tooltip" data-placement="bottom" data-original-title="Red Rose"></span></li><li><span class="bg-color-redLight" data-widget-setstyle="jarviswidget-color-redLight" rel="tooltip" data-placement="bottom" data-original-title="Light Red"></span></li><li><span class="bg-color-white" data-widget-setstyle="jarviswidget-color-white" rel="tooltip" data-placement="right" data-original-title="Purity"></span></li><li><a href="javascript:void(0);" class="jarviswidget-remove-colors" data-widget-setstyle="" rel="tooltip" data-placement="bottom" data-original-title="Reset widget color to default">Remove</a></li></ul></div>
					<span class="widget-icon"> <i class="fa fa-edit"></i> </span>
					<h2>Novo Usuário</h2>				
						
					<span class="jarviswidget-loader" style="display: none;"><i class="fa fa-refresh fa-spin"></i></span></header>
	
					<!-- widget div-->
					<div role="content" style="">
												
						<div class="widget-body no-padding">
								
							<form autocomplete="off" id="user-registration-form" class="smart-form" novalidate="novalidate" ng-submit="saveUser(userAccount)" >
																			
								<div class="md-header btn-toolbar">
								<br>
									<button type="button" class="btn btn-sm btn-default" onclick="window.history.back();">
									<i class="fa fa-reply"></i>
												Voltar
									</button>
									<button type="submit" class="btn btn-sm  btn-success" id="btnUserSave">
										<i class="fa fa-save"></i>
											Salvar
									</button>								
									<br>
								</div>
								<br>
								<hr>
								<fieldset>									
									
									<legend class="text-primary">Login no Sistema</legend>								
										<section>
											<input name="email" style="display:none"> <!-- Incluido essa linha para o chrome ignorar o autocomplete  -->
											<label class="input"> <i class="icon-prepend fa fa-envelope-o"></i>												
												<input type="email" name="email" placeholder="E-mail" ng-model="userAccount.email">
											</label>
										</section>
										
										<div class="row">
											<section class="col col-6">
												<label class="input"> <i class="icon-prepend fa fa-lock"></i>
													<input type="password" name="password" placeholder="Senha" id="password" ng-model="userAccount.password" >
												</label>
											</section>
											<section class="col col-6">
												<label class="input"> <i class="icon-prepend fa fa-lock"></i>
													<input type="password" name="passwordConfirm" placeholder="Repita a Senha" ng-model="passwordConfirm">
												</label>
											</section>
										</div>
										
										<div class="row">
											<section class="col col-6">
												<label class="input"> <i class="icon-prepend fa fa-user"></i>
													<input type="text" name="fname" placeholder="Nome" ng-model="userAccount.name">
												</label>
											</section>										
										</div>										
										<section>
											<label class="checkbox"><input type="checkbox" name="chkActiveUser" id="chkActiveUser" ng-model="userAccount.active"><i></i>Usuário ativo</label>
											<label class="checkbox"><input type="checkbox" name="chkPortalAccess" id="chkPortalAccess" ng-model="userAccount.portalAccess"/><i></i>Usuário terá acesso ao portal </label>
											<label class="checkbox"><input type="checkbox" name="chkIsSeller" id="chkIsSeller"><i></i>Esse usuário é um vendedor</label>
											<label class="checkbox"><input type="checkbox" name="chkIsAdmin" id="chkIsAdmin"><i></i>Esse usuário é um administrador</label>  
										</section>								
									
								</fieldset>																
								
								<fieldset>
									<legend class="text-primary">Configurações de venda</legend>
										<small>Selecione a empresa que deseja realizar as configurações de vendas para o usuário</small>
										
										
										<table class="table table-hover">
												<thead>
													<tr>
														<th style="width: 40px;">#</th>
														<th style="width: 23px;">Código</th>
														<th style="width: 300px;">Empresa</th>
														<th style="width: 100px;">Desconto Máximo</th>
														<th style="width: 100px;">Valor Minimo de Venda</th>
														<th style="width: 100px;">Atende Todos os Clientes</th>
														<th style="width: 100px;">Usuario Atende</th>
													</tr>
												</thead>
												<tbody>
													<tr ng-repeat="userBranch in userBranches">
														<td>
															<a href="javascript:void(0);" title="Editar Configurações de Venda Para Essa Empresa."><i class="fa fa-pencil fa-lg"></i></a>
															<a href="javascript:void(0);" title="Vendedor Não Vende Para Essa Empresa." ng-show="userBranch.active"><i class="fa fa-ban fa-lg"></i></a>
															<a href="javascript:void(0);" title="Vendedor Vende Para Essa Empresa." ng-hide="userBranch.active"><i class="fa fa-check fa-lg"></i></a>														
														 </td>
														 <td>{{userBranch.branchOffice.organization.organizationID}}</td>
														<td>{{userBranch.branchOffice.realName}}</td>
														<td>{{userBranch.maximumDiscount}} %</td>
														<td>R$ {{userBranch.minimumValueSales}}</td>
														<td>{{userBranch.viewAllCustomers ? 'Sim' : 'Não'}}</td>
														<td>{{userBranch.active ? 'Sim' : 'Não'}}</td>
													</tr>													
												</tbody>
											</table>
											
								</fieldset>
								<fieldset>
									<legend class="text-primary">Permissões de Acesso ao Portal  
										<span rel="popover-hover" data-placement="right" 
											data-content="Os menus que o usuário terá acesso dentro do sistema."><i class="fa fa-question-circle"></i></span>
									
									
									</legend>								
									<div class="tree smart-form">
										<ul role="tree">
											<li class="parent_li" role="treeitem">
												<span title="Collapse this branch"><i class="fa fa-lg fa-folder-open"></i> Web</span>
												<ul role="group">
													<li class="parent_li" role="treeitem">
														<span title="Collapse this branch"><i class="fa fa-lg fa-plus-circle icon-minus-sign"></i>Cadastros</span>
														<ul role="group">
															<li>
																<span> <label class="checkbox inline-block">
																		<input type="checkbox" ng-model="menusApplication.user" name="checkbox-inline">
																		<i></i>Usuários</label> </span>
															</li>
															<li>
																<span> <label class="checkbox inline-block">
																		<input type="checkbox" ng-model="menusApplication.product" name="checkbox-inline">
																		<i></i>Produtos</label> </span>
															</li>
															<li>
																<span> <label class="checkbox inline-block">
																		<input type="checkbox" ng-model="menusApplication.priceTable" name="checkbox-inline">
																		<i></i>Tabelas de Preço</label> </span>
															</li>
															<li>
																<span> <label class="checkbox inline-block">
																		<input type="checkbox" ng-model="menusApplication.installment"  name="checkbox-inline">
																		<i></i>Parcelamentos</label> </span>
															</li>
															<li>
																<span> <label class="checkbox inline-block">
																		<input type="checkbox" ng-model="menusApplication.organization"  name="checkbox-inline">
																		<i></i>Empresas</label> </span>
															</li>
														</ul>
													</li>
																									
													
													<li class="parent_li" role="treeitem">
														<span title="Collapse this branch"><i class="fa fa-lg fa-minus-circle"></i> Pedido</span>
														<ul role="group">
															<li>
																<span> <label class="checkbox inline-block">
																		<input type="checkbox" ng-model="menusApplication.order"  name="checkbox-inline">
																		<i></i>Pedido</label> </span>
															</li>														
														</ul>
													</li>
												</ul>
											</li>										
										</ul>
									</div>
								</fieldset>
	
							</form>
	
						</div>
						<!-- end widget content -->
						
					</div>
					<!-- end widget div -->
					
				</div>			
			
		</article>
	</div>
</section>

		<script src="js/plugin/datatables/jquery.dataTables.min.js"></script>
		<script src="js/plugin/datatables/dataTables.colVis.min.js"></script>
		<script src="js/plugin/datatables/dataTables.tableTools.min.js"></script>
		<script src="js/plugin/datatables/dataTables.bootstrap.min.js"></script>

<script type="text/javascript">
	$(document).ready(function() {
		
		pageSetUp();

		var $checkoutForm = $('#user-registration-form').validate({
		// Rules for form validation
			rules : {
				fname : {
					required : true
				},					
				email : {
					required : true,
					email : true
				},					
				password : {
					required : true,
					minlength : 3,
					maxlength : 20
				},
				passwordConfirm : {
					required : true,
					minlength : 3,
					maxlength : 20,
					equalTo : '#password'
				},
			},
	
			// Messages for form validation
			messages : {
				fname : {
					required : 'Por favor, informe um nome'
				},					
				email : {
					required : 'Por favor informe um e-mail.',
					email : 'Por favor informe um e-mail válido.'
				},				
				address : {
					required : 'Por favor, informe um email'
				},							
				password : {
					required : 'Por favor, informe uma senha',
					minlength: 'Informe uma senha de pelo menos 3 digitos'
				},
				passwordConfirm : {
					required : 'Por favor, iforme iforme o email mais uma vez',
					equalTo : 'Por favor, informe uma senha igual a anterior'
				},
			},

			// Do not change code below
			errorPlacement : function(error, element) {
				error.insertAfter(element.parent());
			}
		});
		



		/*Treeview Permissões  de acesso  */
		$('.tree > ul').attr('role', 'tree').find('ul').attr('role', 'group');
		$('.tree').find('li:has(ul)').addClass('parent_li').attr('role', 'treeitem').find(' > span').attr('title', 'Collapse this branch').on('click', function(e) {
			var children = $(this).parent('li.parent_li').find(' > ul > li');
			if (children.is(':visible')) {
				children.hide('fast');
				$(this).attr('title', 'Expand this branch').find(' > i').removeClass().addClass('fa fa-lg fa-plus-circle');
			} else {
				children.show('fast');
				$(this).attr('title', 'Collapse this branch').find(' > i').removeClass().addClass('fa fa-lg fa-minus-circle');
			}
			e.stopPropagation();
		});

	})	

</script>


